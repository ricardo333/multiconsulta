/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 37);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./resources/js/administrador/modulos/multiconsulta/agenda.js":
/*!********************************************************************!*\
  !*** ./resources/js/administrador/modulos/multiconsulta/agenda.js ***!
  \********************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globalResources_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/globalResources/errors.js */ "./resources/js/globalResources/errors.js");
/* harmony import */ var _peticiones_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./peticiones.js */ "./resources/js/administrador/modulos/multiconsulta/peticiones.js");


var NODO_AGENDAR = "";
var IDCLIENTE_AGENDAR = "";
var SERVICIO_CLIENTE = "";
var NOMBRE_CLIENTE = "";
var ID_TIPOAGENDA_ACTIVA = 0;
var ID_AGENDA_ACTIVA = 0;
var PREAGENDA_PROCESO_ACTUAL = "";
var HTML_TIPO_AGENDA_INICIAL = "";
var VIEW_HORARIO_CUPOS = "VIEW_HORARIOS";
var VIEW_FORMULARIO_CUPO = "VIEW_FORMULARIO_CUPO"; //cuenta regresiva

var timerUpdate = null;
var TIEMPO_RESTANTE_MINUTOS = 5;
var BLOQUEO_RESERVACION_AGENDA = false;
var TARGET = null;
var TARGET_ID = null;
$(function () {
  $.ajaxSetup({
    headers: {
      'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    }
  });
  $(document).click(function (event) {
    TARGET = $(event.target);
    TARGET_ID = event.target.id; //console.log("El target  es: ",TARGET)
    //console.log("El target ID es: ",event.target.id)
    //console.log("Tiene la clase icofont-maximize: ",TARGET.hasClass('icofont-maximize'))
    //console.log("el bloqueo dentro del document esta en : ",BLOQUEO_RESERVACION_AGENDA)

    if (BLOQUEO_RESERVACION_AGENDA) {
      //console.log("la validacion del bloqueo es: ",validarBloqueo())
      if (validarBloqueo()) {
        $("#body-detalles-modal").html(" \n                  <section id=\"content_cancelar_cupo\">\n                    <div class=\"w-100 text-danger\">\n                      Si intenta salir de esta secci\xF3n, se perder\xE1 su reserva, esta seguro de abandonar su supo?\n                    </div>\n                    <div class=\"w-100 row m-0 justify-content-center\">\n                      <button id=\"abandonarCupoReservado\" \n                            class=\"btn btn-sm btn-outline-info shadow-sm m-1 col-sm-6 col-md-4\">Si Abandonar</button>\n                      <button type=\"button\" class=\"btn btn-sm btn-outline-danger shadow-sm m-1 col-sm-6 col-md-4\" data-dismiss=\"modal\">Cancelar</button>\n                    </div>\n                  </section>\n              ");
        $("#detallesModal").modal("show");
        return false;
      }
    }
  });

  function validarBloqueo() {
    //console.log("el target contenedor es: ",TARGET)
    if (TARGET_ID) {
      return !TARGET.closest('#contenedor_formulario_agenda_principal').length && TARGET_ID !== "abandonarCupoReservado" && !TARGET.hasClass('icofont-maximize') && !TARGET.hasClass('icofont-close-line-squared-alt') && !TARGET.hasClass('maxi_tab');
    } else {
      return !TARGET.closest('#contenedor_formulario_agenda_principal').length && !TARGET.hasClass('icofont-maximize') && !TARGET.hasClass('icofont-close-line-squared-alt') && !TARGET.hasClass('maxi_tab');
    }
  }

  $("#return_agenda_to_multiconsultaTab").click(function () {
    //console.log("Aqui estamos, deberiamos validar el estado del bloqueo...")
    if (BLOQUEO_RESERVACION_AGENDA) {
      //console.log("la validacion del bloqueo es: ",validarBloqueo())
      if (validarBloqueo()) {
        $("#body-detalles-modal").html(" \n                <section id=\"content_cancelar_cupo\">\n                  <div class=\"w-100 text-danger\">\n                    Si intenta salir de esta secci\xF3n, se perder\xE1 su reserva, esta seguro de abandonar su supo?\n                  </div>\n                  <div class=\"w-100 row m-0 justify-content-center\">\n                    <button id=\"abandonarCupoReservado\" \n                          class=\"btn btn-sm btn-outline-info shadow-sm m-1 col-sm-6 col-md-4\">Si Abandonar</button>\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-danger shadow-sm m-1 col-sm-6 col-md-4\" data-dismiss=\"modal\">Cancelar</button>\n                  </div>\n                </section>\n            ");
        $("#detallesModal").modal("show");
        return false;
      }
    }

    _peticiones_js__WEBPACK_IMPORTED_MODULE_1__["default"].redirectTabs($("#multiconsultaTab"));
    $("#preLoadAgendaSend").html("");
    $("#resultPreAgendaContent").html("");
    $("#resultAgendaGrafico").html("");

    if (timerUpdate != null) {
      clearInterval(timerUpdate); //console.log("se detuvo el timerUpdate")
    }
  });

  function cargaPrincipalAgendaDetalles() {
    var accionAgenda = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "agendar";
    var idCliente = $("#preAgendaMulti").data("uno");
    var sw = $("#preAgendaMulti").data("dos");
    var nodo = $("#preAgendaMulti").data("tres");
    var accionCarga = accionAgenda;
    $("#resultPreAgendaContent").html("<div id=\"carga_person\">\n                                              <div class=\"loader\">Loading...</div>\n                                          </div>");
    $("#preLoadAgendaSend").html("");
    $("#resultAgendaGrafico").html("");
    $.ajax({
      url: "/administrador/multiconsulta/agenda/detalle",
      method: "get",
      async: true,
      data: {
        idCliente: idCliente,
        sw: sw,
        nodo: nodo,
        accionCarga: accionCarga
      },
      cache: false,
      dataType: "json"
    }).done(function (data) {
      //console.log("la data inicial es: ",data)
      NODO_AGENDAR = "";
      IDCLIENTE_AGENDAR = "";
      SERVICIO_CLIENTE = "";
      NOMBRE_CLIENTE = "";
      ID_TIPOAGENDA_ACTIVA = 0;
      ID_AGENDA_ACTIVA = 0;
      var principalContenido = "";
      var tabla = "";
      data.response.data.forEach(function (el) {
        SERVICIO_CLIENTE = el.servicio;
        NOMBRE_CLIENTE = el.nameclient;
        tabla += "<div class=\"form-group row mx-0 my-1 px-2 col-md-6\">\n                      <label for=\"detalleCodCliente\" class=\"col-sm-3 col-md-4 col-form-label col-form-label-sm mb-0 px-0\">CLIENTE: </label> \n                      <span class=\"form-control form-control-sm col-sm-9 col-md-8 bg-secondary\">".concat(el.codcli, "</span>   \n                    </div>\n                    <div class=\"form-group row mx-0 my-1 px-2 col-md-6\">\n                      <label for=\"detalleServicio\" class=\"col-sm-3 col-md-4 col-form-label col-form-label-sm mb-0 px-0\">SERVICIO: </label> \n                      <span class=\"form-control form-control-sm  col-sm-9 col-md-8 bg-secondary\">").concat(el.servicio, "</span>   \n                    </div>\n                    <div class=\"form-group row mx-0 my-1 px-2 col-md-6\">\n                      <label for=\"detalleCodCliente\" class=\"col-sm-3 col-md-4 col-form-label col-form-label-sm mb-0 px-0\">NODO: </label> \n                      <span class=\"form-control form-control-sm  col-sm-9 col-md-8 bg-secondary\">").concat(el.nodo, "</span>   \n                    </div>\n                    <div class=\"form-group row mx-0 my-1 px-2 col-md-6\">\n                      <label for=\"detallenombreCliente\" class=\"col-sm-3 col-md-4 col-form-label col-form-label-sm mb-0 px-0\">NOMBRE: </label> \n                      <span class=\"form-control form-control-sm  col-sm-9 col-md-8 bg-secondary\">").concat(el.nameclient, "</span>   \n                    </div>\n                    <div class=\"form-group row mx-0 my-1 px-2 col-md-12\">\n                      <label for=\"detalleDireccion\" class=\"col-sm-3 col-md-2 col-form-label col-form-label-sm mb-0 px-0\">DIRECCION: </label> \n                      <span class=\"form-control form-control-sm  col-sm-9 col-md-10 bg-secondary\">").concat(el.DIREC_INST, "</span>   \n                    </div>\n                    ");
        NODO_AGENDAR = el.nodo;
      });
      var agendaPendiente = "";
      var detallesParaAgendar = "";
      IDCLIENTE_AGENDAR = data.response.idCliente;
      HTML_TIPO_AGENDA_INICIAL = "";

      if (data.response.estaAgendado && data.response.accionRealizar == "agendar") {
        ID_TIPOAGENDA_ACTIVA = data.response.detalleAgenda[0].tipocliagenda;
        ID_AGENDA_ACTIVA = data.response.detalleAgenda[0].id;
        agendaPendiente += "<div class=\"w-100 text-center text-primary font-weight-bold my-2\">El Cliente ya cuenta con una Agenda pendiente:</div>";
        agendaPendiente += "<div class=\"table-responsive\">\n                              <table class=\"m-auto table-hover table-bordered\">\n                                <tr>\n                                  <th align='left'>Tipo de Agenda: </th>\n                                  <td> ".concat(data.response.detalleAgenda[0].tipoAgendaReservado[0].tipoturno, "</td>\n                                </tr>\n                                <tr>\n                                  <th align='left'>Fecha de Agenda: </th>\n                                  <td> ").concat(data.response.detalleAgenda[0].fecha, "</td>\n                                </tr>\n                                <tr>\n                                  <th align='left'>Codreq: </th>\n                                  <td> ").concat(data.response.detalleAgenda[0].codreq, "</td>\n                                </tr>\n                                <tr>\n                                  <th align='left'>Turno: </th>\n                                  <td> ").concat(data.response.detalleAgenda[0].turno, "</td>\n                                </tr>\n                                <tr>\n                                  <th align='left'>Fecreg Agenda: </th>\n                                  <td> ").concat(data.response.detalleAgenda[0].fecharegistroagenda, "</td>\n                                </tr>\n                                <tr>\n                                  \n                                  <td colspan=\"2\">\n                                      <a href=\"javascript:void(0)\"  data-uno=\"").concat(data.response.detalleAgenda[0].id, "\"\n                                          data-dos=\"").concat(data.response.detalleAgenda[0].codcli, "\" data-tres=\"2\"\n                                          id=\"reAgendarClienteMulti\"\n                                          class=\"btn btn-sm btn-outline-success shadow-sm w-100\">Reagendar</a></td>\n                                </tr>\n                              </table>\n                              </div>");
      } else {
        if (data.response.accionRealizar == "reagendar") {
          ID_TIPOAGENDA_ACTIVA = data.response.detalleAgenda[0].tipocliagenda;
          ID_AGENDA_ACTIVA = data.response.detalleAgenda[0].id;
        }

        detallesParaAgendar += "\n                                  <div class=\"form-group row mx-0 px-1 my-1 col-12 col-sm-12 col-md-8 \" id=\"detTipoAgendaInicial\">";

        if (ID_TIPOAGENDA_ACTIVA > 0) {
          HTML_TIPO_AGENDA_INICIAL = "<label for=\"tipoDeAgenda\" class=\"col-sm-3 col-md-3 col-form-label col-form-label-sm mb-0 px-0\">Tipo de Agenda: </label>\n                                          ".concat(data.response.detalleAgenda[0].tipoAgendaReservado[0].tipoturno, "\n                                          <input type=\"hidden\" value=\"").concat(ID_TIPOAGENDA_ACTIVA, "\" id=\"tipoDeAgenda\">\n                                          ");
        } else {
          HTML_TIPO_AGENDA_INICIAL = "\n                                    <label for=\"tipoDeAgenda\" class=\"col-sm-3 col-md-3 col-form-label col-form-label-sm mb-0 px-0\">Tipo de Agenda: </label>    \n                                    <div class=\"input-group col-sm-9 col-md-9 p-0\">  \n                                        <select name=\"tipoDeAgenda\" id=\"tipoDeAgenda\" class=\"form-control form-control-sm shadow-sm\">\n                                        <option value=\"seleccionar\">Seleccionar</option>\n                                      ";
          data.response.tipoDeAgenda.forEach(function (el) {
            HTML_TIPO_AGENDA_INICIAL += "<option value=\"".concat(el.id, "\">").concat(el.tipoturno, "</option>");
          });
          HTML_TIPO_AGENDA_INICIAL += "      </select>  \n                                          <!--<span class=\"input-group-btn\">\n                                            <a href=\"javascript:void(0)\"  data-uno=\"".concat(data.response.idCliente, "\"\n                                                    class=\"btn btn-sm btn-outline-primary shadow-sm  h-100 d-flex align-items-center\"  id=\"cargarAgendaCuposDisponbilesSemanal\">\n                                                Ver Turnos\n                                            </a> \n                                          </span>-->\n                                    </div>");
        }

        detallesParaAgendar += HTML_TIPO_AGENDA_INICIAL;
        detallesParaAgendar += "</div>\n                                    <div class=\"form-group row mx-0 px-1 my-1 col-12 col-sm-12 col-md-4 justify-content-sm-center justify-content-md-end\">\n                                      <span class=\"btn btn-sm btn-warning font-weight-bold\" >Tiempo restante: <i id=\"contadorRegresivoAgendaFinal\">00:00</i></span>\n                                    </div>\n                                  </div>";
        detallesParaAgendar += "<div class=\"w-100\" id=\"resultFormProcesoPreAgendar\"></div>";
      }

      principalContenido += tabla;
      principalContenido += agendaPendiente;
      principalContenido += detallesParaAgendar;
      $("#resultPreAgendaContent").html(principalContenido);

      if (parseInt(ID_TIPOAGENDA_ACTIVA) > 0 && data.response.accionRealizar == "reagendar") {
        var tipoDeAgenda = $("#tipoDeAgenda").val(); // let diaDeAgenda = $("#diaDeAgenda").val()
        //let idCliente = $(this).data("uno")

        var _idCliente = IDCLIENTE_AGENDAR;
        var _nodo = NODO_AGENDAR;

        if (_nodo == "") {
          //$("#preLoadAgendaSend").html(``)
          //$("#resultPreAgendaContent").html(``)
          $("#body-errors-modal").html("<div class=\"w-100 text-center text-danger\">No se puede identificar el NODO, intente ingresar nuevamente.</div>");
          $('#errorsModal').modal('show'); // peticiones.redirectTabs($("#multiconsultaTab")); 

          return false;
        }

        var parametros = {
          tipoDeAgenda: tipoDeAgenda,
          // diaDeAgenda,
          idCliente: _idCliente,
          nodo: _nodo //console.log("el valor del timerUpdate es: ",timerUpdate)

        };

        if (timerUpdate != null) {
          clearInterval(timerUpdate); //console.log("se detuvo el timerUpdate")
        } //console.log("Lo parametros a enviar son : ",parametros)


        cargarTurnosYDiasGeneralesDisponibles(parametros);
      }
    }).fail(function (jqXHR, textStatus, errorThrown) {
      //console.log( "Request failed: " ,textStatus ,jqXHR,errorThrown);
      _peticiones_js__WEBPACK_IMPORTED_MODULE_1__["default"].redirectTabs($("#multiconsultaTab")); //$("#resultPreAgendaContent").html(jqXHR.responseText)
      //return false

      var erroresPeticion = "";

      if (jqXHR.responseJSON) {
        if (jqXHR.responseJSON.mensaje) {
          var erroresMensaje = jqXHR.responseJSON.mensaje; //captura objeto

          var mensaje = _globalResources_errors_js__WEBPACK_IMPORTED_MODULE_0__["default"].mensajeErrorJson(erroresMensaje);
          erroresPeticion += mensaje;
        }
      }

      if (jqXHR.status) {
        var _mensaje = _globalResources_errors_js__WEBPACK_IMPORTED_MODULE_0__["default"].codigos(jqXHR.status);

        erroresPeticion += "<br> " + _mensaje;
      }

      erroresPeticion = erroresPeticion.trim() == 0 ? "hubo un error en el servicio, intente nuevamente." : erroresPeticion;
      $("#body-errors-modal").html("<div class=\"w-100 text-center text-danger\">".concat(erroresPeticion, "</div>"));
      $('#errorsModal').modal('show');
      /* $("#resultPreAgendaContent").html(`<div class="container text-center font-weight-bold alert alert-danger fade show" role="alert">
                                           <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                               <span aria-hidden="true">&times;</span>
                                           </button>
                                           ${erroresPeticion}</div>`);*/

      return false;
    });
  }

  $("body").on("click", "#preAgendaMulti", function () {
    _peticiones_js__WEBPACK_IMPORTED_MODULE_1__["default"].redirectTabs($("#preAgendaTab"));
    cargaPrincipalAgendaDetalles();
  });
  $("body").on("click", "#cargarAgendaCuposDisponbilesSemanal", function () {
    var tipoDeAgenda = $("#tipoDeAgenda").val(); // let diaDeAgenda = $("#diaDeAgenda").val()
    //let idCliente = $(this).data("uno")

    var idCliente = IDCLIENTE_AGENDAR;
    var nodo = NODO_AGENDAR;

    if (nodo == "") {
      //$("#preLoadAgendaSend").html(``)
      //$("#resultPreAgendaContent").html(``)
      $("#body-errors-modal").html("<div class=\"w-100 text-center text-danger\">No se puede identificar el NODO, intente ingresar nuevamente.</div>");
      $('#errorsModal').modal('show'); // peticiones.redirectTabs($("#multiconsultaTab")); 

      return false;
    }

    var parametros = {
      tipoDeAgenda: tipoDeAgenda,
      // diaDeAgenda,
      idCliente: idCliente,
      nodo: nodo //console.log("el valor del timerUpdate es: ",timerUpdate)

    };

    if (timerUpdate != null) {
      clearInterval(timerUpdate); //console.log("se detuvo el timerUpdate")
    }

    cargarTurnosYDiasGeneralesDisponibles(parametros);
  });
  $("body").on("change", "#tipoDeAgenda", function () {
    var tipoDeAgenda = $(this).val(); // let diaDeAgenda = $("#diaDeAgenda").val()
    //let idCliente = $(this).data("uno")

    var idCliente = IDCLIENTE_AGENDAR;
    var nodo = NODO_AGENDAR; //console.log("cambio de tipo de agenda, deberia limpiarse el calendario de cupos y resetear el contador a cero nuevamente")

    if (timerUpdate != null) {
      clearInterval(timerUpdate); //console.log("se detuvo el timerUpdate")

      $("#contadorRegresivoAgendaFinal").html("00:00");
    }

    if (nodo == "") {
      //$("#preLoadAgendaSend").html(``)
      //$("#resultPreAgendaContent").html(``)
      $("#body-errors-modal").html("<div class=\"w-100 text-center text-danger\">No se puede identificar el NODO, intente ingresar nuevamente.</div>");
      $('#errorsModal').modal('show');
      _peticiones_js__WEBPACK_IMPORTED_MODULE_1__["default"].redirectTabs($("#multiconsultaTab")); //console.log("limpiar todo")

      return false;
    }

    var parametros = {
      tipoDeAgenda: tipoDeAgenda,
      // diaDeAgenda,
      idCliente: idCliente,
      nodo: nodo //console.log("el valor del timerUpdate es: ",timerUpdate)

    };
    cargarTurnosYDiasGeneralesDisponibles(parametros);
  });

  function cargarTurnosYDiasGeneralesDisponibles(parametros) {
    //console.log("el tipo de agenda es: ",parametros.tipoDeAgenda.toLowerCase()," el resultadoes: ",parametros.tipoDeAgenda.toLowerCase() == "seleccionar")
    if (parametros.tipoDeAgenda.toLowerCase() == "seleccionar") {
      //console.log("No deberia seguir con el filtro solo limpiar......")
      $("#resultAgendaGrafico").html(""); //$("#contadorRegresivoAgendaFinal").html("00:00")

      return false;
    }

    $("#preLoadAgendaSend").html("<div id=\"carga_person\">\n                                            <div class=\"loader\">Loading...</div>\n                                        </div>");
    $("#resultPreAgendaContent").addClass("d-none");
    $("#resultFormProcesoPreAgendar").html("");
    $("#resultAgendaGrafico").html("");
    $.ajax({
      url: "/administrador/multiconsulta/agenda/verificar-turno",
      method: "get",
      async: true,
      data: parametros,
      cache: false,
      dataType: "json"
    }).done(function (data) {
      $("#preLoadAgendaSend").html("");
      $("#resultPreAgendaContent").removeClass("d-none"); //Grafico

      PREAGENDA_PROCESO_ACTUAL = VIEW_HORARIO_CUPOS;
      countdown(getFechaRegresivoPorMinutos(TIEMPO_RESTANTE_MINUTOS), 'contadorRegresivoAgendaFinal');
      var agendagrafica = "";
      var longitudDias = data.response.diasAgendaTotal.length;
      agendagrafica += "<div class=\"w-100 text-right\">Los cupos se actualizar\xE1n cuando el <strong class=\"text-secondary\">tiempo restante</strong> llegue a 00:00.</div>";
      agendagrafica += "<div class=\"table-responsive\"> <table class=\"w-100 table-hover\">";
      agendagrafica += "<thead>";
      agendagrafica += "<tr><th class=\"agenda_horario\">Horarios</th>";
      data.response.diasAgendaTotal.forEach(function (el) {
        agendagrafica += " \n                                  <th class=\"agenda_dias\">".concat(el.dia, "<br/> ").concat(el.fecha, "</th>\n                                ");
      });
      agendagrafica += "</tr></thead>";
      agendagrafica += "<tbody id=\"detallesAgendaDisponnibles\">";
      data.response.rangoHorariosCompletos.forEach(function (el) {
        agendagrafica += "<tr>\n                                  <td>".concat(el.turno, "</td>");
        data.response.diasAgendaTotal.forEach(function (element) {
          var textoDiponibilidad = "";
          element.rangoHorarios.forEach(function (horarioEl) {
            if (horarioEl.turno == el.turno) {
              textoDiponibilidad = "<button class=\"btn btn-sm shadow-sm btn-outline-success \n                                                                      selectedCupoAgenda\" \n                                                                      data-uno=\"".concat(element.fecha, "\" data-dos=\"").concat(horarioEl.id, "\"\n                                                                      data-tres=\"").concat(parametros.nodo, "\" data-cuatro=\"").concat(data.response.idCliente, "\"\n                                                                      data-detalle-horario=\"").concat(horarioEl.turno, "\" data-detalle-dia=\"").concat(element.dia, ". (").concat(element.fecha, ") \">\n                                                                          ").concat(horarioEl.cuposDisponibles, " Cupos\n                                                                    </button>");
            }
          });

          if (textoDiponibilidad == "") {
            agendagrafica += "<td>No Disponible</td>";
          } else {
            agendagrafica += "<td> ".concat(textoDiponibilidad, "</td>");
          }
        });
        agendagrafica += " </tr>";
      });
      agendagrafica += "</tbody>";
      agendagrafica += "</table></div>";
      $("#resultAgendaGrafico").html(agendagrafica); //console.log("El resultado es: ", data)
    }).fail(function (jqXHR, textStatus, errorThrown) {
      //console.log("Error:",jqXHR, textStatus, errorThrown)
      //PREAGENDA_PROCESO_ACTUAL = ""
      //clearInterval(timerUpdate);
      $("#preLoadAgendaSend").html("");
      $("#resultPreAgendaContent").removeClass("d-none");
      $("#resultAgendaGrafico").html("");
      $("#resultFormProcesoPreAgendar").html(""); //$("#resultFormProcesoPreAgendar").html(jqXHR.responseText)
      //return false

      var erroresPeticion = "";

      if (jqXHR.responseJSON) {
        if (jqXHR.responseJSON.mensaje) {
          var erroresMensaje = jqXHR.responseJSON.mensaje; //captura objeto

          var mensaje = _globalResources_errors_js__WEBPACK_IMPORTED_MODULE_0__["default"].mensajeErrorJson(erroresMensaje);
          erroresPeticion += mensaje;
        }
      }

      if (jqXHR.status) {
        var _mensaje2 = _globalResources_errors_js__WEBPACK_IMPORTED_MODULE_0__["default"].codigos(jqXHR.status);

        erroresPeticion += "<br> " + _mensaje2;
      }

      erroresPeticion = erroresPeticion.trim() == 0 ? "hubo un error en el servicio, intente nuevamente." : erroresPeticion;
      var textoReAgenda = "";

      if (parseInt(ID_TIPOAGENDA_ACTIVA) > 0) {
        textoReAgenda = "</br> Puede reintentar listar los horarios de la reagenda desde \n                                            <a class=\"btn btn-warning btn-sm shadow-sm m-1\" id=\"reintentarListarHorariosDisponiblesReagenda\"> Aqu\xED </a>";
      } // $("#body-errors-modal").html(`<div class="w-100 text-center text-danger">${erroresPeticion}</div>`)
      // $('#errorsModal').modal('show')
      //resultFormProcesoPreAgendar


      $("#resultAgendaGrafico").html("<div class=\"container text-center font-weight-bold alert alert-danger fade show\" role=\"alert\">\n                                                  <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                                                      <span aria-hidden=\"true\">&times;</span>\n                                                  </button>\n                                                  ".concat(erroresPeticion, ".").concat(textoReAgenda, "</div>"));
      return false;
    });
  } //Reintentar listar horarios de reagenda en caso de no cargar correctamente


  $("body").on("click", "#reintentarListarHorariosDisponiblesReagenda", function () {
    var tipoDeAgenda = $("#tipoDeAgenda").val(); // let diaDeAgenda = $("#diaDeAgenda").val()
    //let idCliente = $(this).data("uno")

    var idCliente = IDCLIENTE_AGENDAR;
    var nodo = NODO_AGENDAR;

    if (nodo == "") {
      //$("#preLoadAgendaSend").html(``)
      //$("#resultPreAgendaContent").html(``)
      $("#body-errors-modal").html("<div class=\"w-100 text-center text-danger\">No se puede identificar el NODO, intente ingresar nuevamente.</div>");
      $('#errorsModal').modal('show'); // peticiones.redirectTabs($("#multiconsultaTab")); 

      return false;
    }

    var parametros = {
      tipoDeAgenda: tipoDeAgenda,
      // diaDeAgenda,
      idCliente: idCliente,
      nodo: nodo //console.log("el valor del timerUpdate es: ",timerUpdate)

    };

    if (timerUpdate != null) {
      clearInterval(timerUpdate); //console.log("se detuvo el timerUpdate")
    }

    cargarTurnosYDiasGeneralesDisponibles(parametros);
  }); //INICIO GRAFICO

  $("body").on("click", ".selectedCupoAgenda", function () {
    //console.log("Deberia iniciar la reserva del cupo...")
    //let tipoDeAgenda = $("#tipoDeAgenda").val()
    var dia = $(this).data("uno");
    var tipoTurno = $(this).data("dos");
    var nodo = $(this).data("tres");
    var idCliente = $(this).data("cuatro");
    var detalleHorario = $(this).data("detalleHorario");
    var detalleDia = $(this).data("detalleDia");
    /*console.log("La data a enviar es: ",dia,
               tipoTurno,
               nodo,
               idCliente,detalleHorario,detalleDia)*/

    $("#body-detalles-modal").html("\n                <div id=\"preload_info_agenda_turno\">\n                </div>\n                <section id=\"content_info_agenda_turno\">\n                  <div class=\"w-100 table-responsive\">\n                    <table class=\"w-75 m-auto table table-hover\">\n                      <tr><td>D\xEDa</td><td>".concat(detalleDia, "</td></tr>\n                      <tr><td>Horario</td><td>").concat(detalleHorario, "</td></tr>\n                    </table>\n                  </div>\n                  <div class=\"w-100 row m-0 justify-content-center\">\n                    <button id=\"reservarTurnoSeleccionado\" data-uno=\"").concat(dia, "\" data-dos=\"").concat(tipoTurno, "\"\n                            data-tres=\"").concat(nodo, "\" data-cuatro=\"").concat(idCliente, "\"\n                    class=\"btn btn-sm btn-outline-info shadow-sm m-1 col-sm-6 col-md-4\">Reservar Cupo</button>\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-danger shadow-sm m-1 col-sm-6 col-md-4\" data-dismiss=\"modal\">Cancelar</button>\n                  </div>\n                </section>\n            "));
    $("#detallesModal").modal("show");
  });
  $("body").on("click", "#reservarTurnoSeleccionado", function () {
    //console.log("Debería procesar el turno y registrando su cupo por nodo por 5 minutos...")

    /*$("#preload_info_agenda_turno").html(`<div id="carga_person">
                                              <div class="loader">Loading...</div>
                                          </div>`)*/
    $("#preload_info_agenda_turno").html("<div class=\"d-flex justify-content-center align-content-center flex-wrap w-100\">\n                                                      <div class=\"spinner-border\" role=\"status\" style=\"width: 80px;height: 80px;\">\n                                                      <span class=\"sr-only\">Loading...</span>\n                                                      </div>\n                                                      <div class=\"text-center w-100\">\n                                                          <strong>Separando Cupo</strong>\n                                                      </div>\n                                                  </div>");
    $("#content_info_agenda_turno").addClass("d-none"); // let tipoDeAgenda = $("#tipoDeAgenda").val()

    var dia = $(this).data("uno");
    var tipoTurno = $(this).data("dos");
    var nodo = $(this).data("tres");
    var idCliente = $(this).data("cuatro");
    $.ajax({
      url: "/administrador/multiconsulta/agenda/verificar-cupos",
      method: "get",
      async: true,
      data: {
        // tipoDeAgenda,
        tipoTurno: tipoTurno,
        dia: dia,
        nodo: nodo,
        idCliente: idCliente
      },
      cache: false,
      dataType: "json"
    }).done(function (data) {
      $("#detallesModal").modal("hide");
      $("#preload_info_agenda_turno").html("");
      $("#content_info_agenda_turno").html("");
      PREAGENDA_PROCESO_ACTUAL = VIEW_FORMULARIO_CUPO; //console.log("el valor del timerUpdate es: ",timerUpdate)

      if (timerUpdate != null) {
        clearInterval(timerUpdate); //console.log("se detuvo el timerUpdate")
      }

      countdown(getFechaRegresivoPorMinutos(TIEMPO_RESTANTE_MINUTOS), 'contadorRegresivoAgendaFinal'); //console.log("el resultado es: ", data)

      $("#resultAgendaGrafico").html("");
      $("#resultFormProcesoPreAgendar").html("\n                <section class=\"form row my-2 mx-0\" id=\"contenedor_formulario_agenda_principal\">\n                    <div class=\"form-group row m-1 px-2 col-12 col-sm-12 text-center text-primary justify-content-center\">\n                              <div class=\"w-100 text-center  alert alert-warning p-2 fade show\" role=\"alert\">\n                                  <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                                      <span aria-hidden=\"true\">&times;</span>\n                                  </button>\n                                  En estos momentos tiene un cupo asignado a su cliente, reserve su agenda antes de que el <strong class=\"text-secondary\"> tiempo restante </strong> termine. \n                              </div>\n\n                         \n                    </div>\n                    <div class=\"form-group row m-1 px-2 col-12 col-sm-12 col-md-6 col-lg-6 \">\n                        <label for=\"diaPreAgenda\" class=\"col-sm-5 col-md-4 col-form-label col-form-label-sm mb-0 px-0\">D\xEDa: </label>\n                        <span class=\"form-control form-control-sm col-sm-7  col-md-8 bg-secondary\">".concat(data.response.detalleDia.dia, " - ").concat(data.response.detalleDia.fecha, "</span> \n                        <input type=\"hidden\" id=\"diaPreAgenda\" value=\"").concat(data.response.detalleDia.fecha, "\" />\n                    </div>\n                    <div class=\"form-group row m-1 px-2 col-12 col-sm-12 col-md-6 col-lg-6 \">\n                        <label for=\"horarioPreAgenda\" class=\"col-sm-5 col-md-4 col-form-label col-form-label-sm mb-0 px-0\">Hora: </label>\n                        <span class=\"form-control form-control-sm col-sm-7  col-md-8 bg-secondary\">").concat(data.response.detalleHora.turno, "</span>  \n                        <input type=\"hidden\" id=\"tipoTurnoPreAgenda\" value=\"").concat(data.response.detalleHora.id, "\" />\n                        <input type=\"hidden\" id=\"idRangoPreAgenda\" value=\"").concat(data.response.detalleHora.idturno, "\" />\n                        <input type=\"hidden\" id=\"nodoPreAgenda\" value=\"").concat(nodo, "\" />\n                    </div>\n                    <div class=\"form-group row m-1 px-2 col-12 col-sm-12 col-md-6 col-lg-6 \">\n                        <label for=\"telefonoFijoPreAgenda\" class=\"col-sm-5 col-md-4 col-form-label col-form-label-sm mb-0 px-0\">Telf. Fijo: </label>\n                        <input type=\"text\" name=\"telefonoFijoPreAgenda\" id=\"telefonoFijoPreAgenda\"  class=\"col-sm-7  col-md-8 form-control form-control-sm  validateText\">\n                    </div>\n                    <div class=\"form-group row m-1 px-2 col-12 col-sm-12 col-md-6 col-lg-6 \">\n                        <label for=\"telefonoMovilPreAgenda\" class=\"col-sm-5 col-md-4 col-form-label col-form-label-sm mb-0 px-0\">Telf. Movil: </label>\n                        <input type=\"text\" name=\"telefonoMovilPreAgenda\" id=\"telefonoMovilPreAgenda\"  class=\"col-sm-7  col-md-8 form-control form-control-sm  validateText\">\n                    </div>\n                    <div class=\"form-group row m-1 px-2 col-12 col-sm-12 col-md-6 col-lg-6 \">\n                        <label for=\"codigoReqPreAgenda\" class=\"col-sm-5 col-md-4 col-form-label col-form-label-sm mb-0 px-0\">Cod. Requerimiento: </label>\n                        <input type=\"text\" name=\"codigoReqPreAgenda\" id=\"codigoReqPreAgenda\"  class=\"col-sm-7  col-md-8 form-control form-control-sm  validateText\">\n                    </div>\n                    <div class=\"form-group row m-1 px-2 col-12 col-sm-12\">\n                        <label for=\"observacionesPreAgenda\" class=\"col-sm-5 col-md-4 col-form-label col-form-label-sm mb-0 px-0\">Observaciones: </label>\n                        <textarea name=\"observacionesPreAgenda\" id=\"observacionesPreAgenda\" class=\"col-sm-12 form-control form-control-sm  validateText\" cols=\"30\" rows=\"5\"></textarea>\n                    </div>\n                    <div class=\"form-group row mt-2 px-2 col-12 col-sm-12 justify-content-center\">\n                        <a href=\"javascript:void(0)\" id=\"procesarPreagendaFormSend\" class=\"btn btn-sm btn-outline-success \">Guardar Agenda</a>\n                    </div>\n                </section>\n            ")); //Inicio de restriccion de clicks

      /* 
          var BLOQUEO_RESERVACION_AGENDA = null
          var TARGET = null
      */
      //console.log("el target es: ",TARGET)
      //console.log("El bloquero de click es: ",BLOQUEO_RESERVACION_AGENDA)

      if (TARGET != null) {
        //console.log("el target closest es: ",TARGET.closest('#contenedor_formulario_agenda_principal'))
        BLOQUEO_RESERVACION_AGENDA = true;
      } //console.log("Ahora el bloquero de click es: ",BLOQUEO_RESERVACION_AGENDA)
      // console.log("el target id modal es es: ",$target[0].attributes[0].nodeValue, "la validacion es: ",$target[0].attributes[0].nodeValue !== "abandonarCupoReservado")


      if (parseInt(ID_TIPOAGENDA_ACTIVA) == 0) {
        $("#tipoDeAgenda").prop("disabled", true);
      }
    }).fail(function (jqXHR, textStatus, errorThrown) {
      //console.log("Error: ",jqXHR, textStatus, errorThrown)
      // PREAGENDA_PROCESO_ACTUAL = ""
      //clearInterval(timerUpdate);
      $("#preload_info_agenda_turno").html("");
      $("#content_info_agenda_turno").removeClass("d-none"); // $("#preload_info_agenda_turno").html(jqXHR.responseText)
      // $("#content_info_agenda_turno").removeClass("d-none")
      //return false

      var erroresPeticion = "";

      if (jqXHR.responseJSON) {
        if (jqXHR.responseJSON.mensaje) {
          var erroresMensaje = jqXHR.responseJSON.mensaje; //captura objeto

          var mensaje = _globalResources_errors_js__WEBPACK_IMPORTED_MODULE_0__["default"].mensajeErrorJson(erroresMensaje);
          erroresPeticion += mensaje;
        }
      }
      /*if(jqXHR.status){
          let mensaje = errors.codigos(jqXHR.status)
          erroresPeticion += "<br> "+mensaje
      }*/


      erroresPeticion = erroresPeticion.trim() == 0 ? "hubo un error en el servicio, intente nuevamente." : erroresPeticion; //$("#body-errors-modal").html(`<div class="w-100 text-center text-danger">${erroresPeticion}</div>`)
      //$('#errorsModal').modal('show')

      $("#preload_info_agenda_turno").html("<div class=\"container p-1 text-center font-weight-bold alert alert-danger fade show\" role=\"alert\">\n                                                <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                                                    <span aria-hidden=\"true\">&times;</span>\n                                                </button>\n                                                ".concat(erroresPeticion, "</div>"));
      return false;
    });
  }); //END GRAFICO

  $("body").on("click", "#abandonarCupoReservado", function () {
    BLOQUEO_RESERVACION_AGENDA = false; //console.log("aqui estamos, se deberia haber limpiado el bloqueo de click, el bloqueo esta en: ",BLOQUEO_RESERVACION_AGENDA)
    //console.log("Inicia retiro de cupo y limpiado de formulario..")
    //Verificar Estado de proceso

    if (PREAGENDA_PROCESO_ACTUAL == VIEW_HORARIO_CUPOS) {
      //console.log("El proceso pre agenda esta en vista de horarios de todos los cupos, deberia actualizar el horario llamando a la function cargarTurnosYDiasGeneralesDisponibles")
      var tipoDeAgenda = $("#tipoDeAgenda").val();
      var idCliente = IDCLIENTE_AGENDAR;
      var nodo = NODO_AGENDAR;

      if (nodo == "") {
        //$("#preLoadAgendaSend").html(``)
        //$("#resultPreAgendaContent").html(``)
        $("#body-errors-modal").html("<div class=\"w-100 text-center text-danger\">No se puede identificar el NODO, intente ingresar nuevamente.</div>");
        $('#errorsModal').modal('show');
        _peticiones_js__WEBPACK_IMPORTED_MODULE_1__["default"].redirectTabs($("#multiconsultaTab"));
        return false;
      }

      var parametros = {
        tipoDeAgenda: tipoDeAgenda,
        idCliente: idCliente,
        nodo: nodo
      };
      $("#detallesModal").modal("hide");
      cargarTurnosYDiasGeneralesDisponibles(parametros);
      return false;
    } else if (PREAGENDA_PROCESO_ACTUAL == VIEW_FORMULARIO_CUPO) {
      //console.log("El proceso pre agenda esta en  vista del formulario de cupo reservado, deberia mostrar un modal indicando que se reseteará la reserva del cupo.")
      $("#detallesModal").modal("hide");
      resetarReservaCupoNodo();
      return false;
    }
  });
  $("body").on("click", "#procesarPreagendaFormSend", function () {
    var telefonoFijo = $("#telefonoFijoPreAgenda").val();
    var telefonoMovil = $("#telefonoMovilPreAgenda").val();
    var codigoRequerimiento = $("#codigoReqPreAgenda").val();
    var observaciones = $("#observacionesPreAgenda").val();
    var idCliente = IDCLIENTE_AGENDAR;
    var servicioCliente = SERVICIO_CLIENTE;
    var nodo = NODO_AGENDAR;
    var nombreCliente = NOMBRE_CLIENTE;
    var fechaDia = $("#diaPreAgenda").val();
    var turnoHorario = $("#tipoTurnoPreAgenda").val();
    var idRangoHorario = $("#idRangoPreAgenda").val();
    var tipoAgendaCliente = $("#tipoDeAgenda").val();
    var EstadoAgendaProcesar = "agendar";
    var idAgendaActiva = 0;

    if (parseInt(ID_TIPOAGENDA_ACTIVA) > 0) {
      EstadoAgendaProcesar = "preagendar";
      idAgendaActiva = ID_AGENDA_ACTIVA;
    }

    $("#preLoadAgendaSend").html("<div id=\"carga_person\">\n                                        <div class=\"loader\">Loading...</div>\n                                    </div>");
    $("#resultPreAgendaContent").addClass("d-none");
    $("#resultAgendaGrafico").html("");
    $.ajax({
      url: "/administrador/multiconsulta/agenda/store",
      method: "post",
      async: true,
      data: {
        telefonoFijo: telefonoFijo,
        telefonoMovil: telefonoMovil,
        codigoRequerimiento: codigoRequerimiento,
        observaciones: observaciones,
        idCliente: idCliente,
        servicioCliente: servicioCliente,
        nodo: nodo,
        nombreCliente: nombreCliente,
        fechaDia: fechaDia,
        turnoHorario: turnoHorario,
        idRangoHorario: idRangoHorario,
        tipoAgendaCliente: tipoAgendaCliente,
        EstadoAgendaProcesar: EstadoAgendaProcesar,
        idAgendaActiva: idAgendaActiva
      },
      cache: false,
      dataType: "json"
    }).done(function (data) {
      //console.log("el resultado es: ", data)
      $("#preLoadAgendaSend").html("");
      $("#resultPreAgendaContent").removeClass("d-none");
      $("#resultPreAgendaContent").html("");
      $("#resultAgendaGrafico").html("");

      if (timerUpdate != null) {
        clearInterval(timerUpdate); // console.log("se detuvo el timerUpdate")
      }

      BLOQUEO_RESERVACION_AGENDA = false;
      $("#body-success-modal").html("<div class=\"w-100 text-center text-success\">".concat(data.mensaje, "</div>"));
      $("#successModal").modal("show");
      cargaPrincipalAgendaDetalles();
    }).fail(function (jqXHR, textStatus, errorThrown) {
      //console.log("Error: ",jqXHR, textStatus, errorThrown)
      $("#preLoadAgendaSend").html("");
      $("#resultAgendaGrafico").html("");
      $("#resultPreAgendaContent").removeClass("d-none"); //$("#preLoadAgendaSend").html(jqXHR.responseText)
      //    return false

      var erroresPeticion = "";

      if (jqXHR.responseJSON) {
        if (jqXHR.responseJSON.mensaje) {
          var erroresMensaje = jqXHR.responseJSON.mensaje; //captura objeto

          var mensaje = _globalResources_errors_js__WEBPACK_IMPORTED_MODULE_0__["default"].mensajeErrorJson(erroresMensaje);
          erroresPeticion += mensaje;
        }
      }

      if (jqXHR.status) {
        var _mensaje3 = _globalResources_errors_js__WEBPACK_IMPORTED_MODULE_0__["default"].codigos(jqXHR.status);

        erroresPeticion += "<br> " + _mensaje3;
      }

      erroresPeticion = erroresPeticion.trim() == 0 ? "hubo un error en el servicio, intente nuevamente." : erroresPeticion; //$("#body-errors-modal").html(`<div class="w-100 text-center text-danger">${erroresPeticion}</div>`)
      //$('#errorsModal').modal('show')

      $("#preLoadAgendaSend").html("<div class=\"container text-center font-weight-bold alert alert-danger fade show\" role=\"alert\">\n                                            <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                                                <span aria-hidden=\"true\">&times;</span>\n                                            </button>\n                                            ".concat(erroresPeticion, "</div>"));
      return false;
    });
  }); //Cuenta regresiva

  var getTime = function getTime(dateTo) {
    var now = new Date(),
        time = (new Date(dateTo) - now + 1000) / 1000,
        seconds = ('0' + Math.floor(time % 60)).slice(-2),
        minutes = ('0' + Math.floor(time / 60 % 60)).slice(-2),
        hours = ('0' + Math.floor(time / 3600 % 24)).slice(-2),
        days = Math.floor(time / (3600 * 24));
    return {
      seconds: seconds,
      minutes: minutes,
      //hours,
      //days,
      time: time
    };
  };

  var countdown = function countdown(dateTo, element) {
    var item = document.getElementById(element);
    timerUpdate = setInterval(function () {
      var currenTime = getTime(dateTo);
      item.innerHTML = "   ".concat(currenTime.minutes, " :  ").concat(currenTime.seconds, " ");

      if (currenTime.time <= 1) {
        clearInterval(timerUpdate); // alert('Fin de la cuenta '+ element);

        /* console.log(`Se termino el tiempo debería preguntar si desea mantener la reserva del cupo o ya no p
                    para mandar un ajax de descontar cupo`)*/
        //console.log("El estado actual es: ",PREAGENDA_PROCESO_ACTUAL)

        if (PREAGENDA_PROCESO_ACTUAL == "") {
          //console.log("El proceso pre agenda esta vacio, por lo tanto debe estar en stop el cronometro")
          return false;
        } else if (PREAGENDA_PROCESO_ACTUAL == VIEW_HORARIO_CUPOS) {
          //console.log("El proceso pre agenda esta en vista de horarios de todos los cupos, deberia actualizar el horario llamando a la function cargarTurnosYDiasGeneralesDisponibles")
          var tipoDeAgenda = $("#tipoDeAgenda").val();
          var idCliente = IDCLIENTE_AGENDAR;
          var nodo = NODO_AGENDAR;

          if (nodo == "") {
            //$("#preLoadAgendaSend").html(``)
            //$("#resultPreAgendaContent").html(``)
            $("#body-errors-modal").html("<div class=\"w-100 text-center text-danger\">No se puede identificar el NODO, intente ingresar nuevamente.</div>");
            $('#errorsModal').modal('show'); // peticiones.redirectTabs($("#multiconsultaTab")); 

            return false;
          }

          var parametros = {
            tipoDeAgenda: tipoDeAgenda,
            idCliente: idCliente,
            nodo: nodo
          };
          $("#detallesModal").modal("hide");
          cargarTurnosYDiasGeneralesDisponibles(parametros);
          return false;
        } else if (PREAGENDA_PROCESO_ACTUAL == VIEW_FORMULARIO_CUPO) {
          //console.log("El proceso pre agenda esta en  vista del formulario de cupo reservado, deberia mostrar un modal indicando que se reseteará la reserva del cupo.")
          resetarReservaCupoNodo();
          return false;
        } //console.log("No ingreso a ninguna opcion de los procesos,",PREAGENDA_PROCESO_ACTUAL)

      }
    }, 1000);
  };

  function getFechaRegresivoPorMinutos(number) {
    var fecha = new Date();
    return fecha.setMinutes(fecha.getMinutes() + number);
  }

  function resetarReservaCupoNodo() {
    var tipoTurno = $("#tipoTurnoPreAgenda").val();
    var dia = $("#diaPreAgenda").val();
    var nodo = $("#nodoPreAgenda").val();

    if (timerUpdate != null) {
      clearInterval(timerUpdate); //console.log("se detuvo el timerUpdate")

      $("#contadorRegresivoAgendaFinal").html("00:00");
    } //console.log("la data a enviar es: ",tipoTurno,dia,nodo)


    $("#preLoadAgendaSend").html("<div id=\"carga_person\">\n                                        <div class=\"loader\">Loading...</div>\n                                    </div>");
    $("#resultPreAgendaContent").addClass("d-none");
    $("#resultAgendaGrafico").html("");
    $("#contenedor_formulario_agenda_principal").html("");
    $.ajax({
      url: "/administrador/multiconsulta/agenda/quitar-cupos",
      method: "post",
      async: true,
      data: {
        tipoTurno: tipoTurno,
        dia: dia,
        nodo: nodo
      },
      cache: false,
      dataType: "json"
    }).done(function (data) {
      //console.log("el resultado es: ", data)
      BLOQUEO_RESERVACION_AGENDA = false;

      if (parseInt(ID_TIPOAGENDA_ACTIVA) == 0) {
        $("#preLoadAgendaSend").html("");
        $("#resultPreAgendaContent").removeClass("d-none");
        $("#body-errors-modal").html("<div class=\"w-100 text-center text-danger\">Su cupo reservado fue retirado.</div>");
        $('#errorsModal').modal('show');
        $("#tipoDeAgenda").prop("disabled", false);
        $("#tipoDeAgenda").val("seleccionar");
      } else {
        $("#resultPreAgendaContent").removeClass("d-none");
        cargaPrincipalAgendaDetalles();
      } //peticiones.redirectTabs($("#multiconsultaTab"));

    });
    /*.fail(function(jqXHR, textStatus, errorThrown){
      //console.log("Error: ",jqXHR, textStatus, errorThrown)
        $("#preLoadAgendaSend").html("");
        $("#body-errors-modal").html(`<div class="w-100 text-center text-danger">Su tiempo de cupo reservado termino, intente nuevamente.</div>`)
      $('#errorsModal').modal('show')
        peticiones.redirectTabs($("#multiconsultaTab"));
        return false
      })*/
  } //REAGENDAR


  $("body").on("click", "#reAgendarClienteMulti", function () {
    var idAgenda = $(this).data("uno");
    var idCliente = $(this).data("dos");
    var sw = $(this).data("tres");
    $("#body-detalles-modal").html("\n                <section id=\"contene_info_reagendar_redirect\">\n                  <div class=\"w-100 text-danger text-center\">\n                        \n                            Recuerde que se eliminar\xE1 su cupo actual cancelando su agenda y se iniciar\xE1 una nueva disponible. \n                        <br> \xBFEst\xE1 seguro de reagendar?.\n                  </div>\n                  <div class=\"w-100 row m-0 justify-content-center\">\n                    <button id=\"redirectReagendarBtn\"  data-uno=\"".concat(idAgenda, "\" data-dos=\"").concat(idCliente, "\" data-tres=\"").concat(sw, "\"\n                          class=\"btn btn-sm btn-outline-info shadow-sm m-1 col-sm-6 col-md-4\">Reagendar</button>\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-danger shadow-sm m-1 col-sm-6 col-md-4\" data-dismiss=\"modal\">Cancelar</button>\n                  </div>\n                </section>\n            "));
    $("#detallesModal").modal("show");
  });
  $("body").on("click", "#redirectReagendarBtn", function () {
    $("#detallesModal").modal("hide");
    cargaPrincipalAgendaDetalles("reagendar");
  });
});

/***/ }),

/***/ "./resources/js/administrador/modulos/multiconsulta/peticiones.js":
/*!************************************************************************!*\
  !*** ./resources/js/administrador/modulos/multiconsulta/peticiones.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var peticiones = {};

peticiones.redirectTabs = function redirectTabs(identificador) {
  $('#tabsMultiContent > .tab-pane').removeClass('show');
  $('#tabsMultiContent > .tab-pane').removeClass('active');
  identificador.tab('show');
};

peticiones.searchCountMulticonsulta = function searchCountMulticonsulta(tipo, valor, callBack) {
  //search
  //console.log("la data que se enviara sera: ", tipo,valor)
  $.ajax({
    url: "/administrador/multiconsulta",
    method: "POST",
    async: true,
    data: {
      type_data: tipo,
      text: valor
    },
    cache: false,
    dataType: "json"
  }).done(function (data) {
    //console.log("callbak antes del envio:",data)
    return callBack(data);
  }).fail(function (jqXHR, textStatus, errorThrown) {
    // console.log( "Request failed: " ,textStatus ,jqXHR,errorThrown);
    return callBack({
      "error": "failed",
      "jqXHR": jqXHR,
      "textStatus": textStatus,
      "errorThrown": errorThrown
    });
  });
};

peticiones.armandoMultiplesResultadosNClientes = function armandoMultiplesResultadosNClientes(data) {
  var idCliente = "";
  var nombreCliente = "";
  var tabla_multiple = "<div class=\"w-100 result-form-multi\">\n                            <h3 class=\"text-center text-uppercase\">Seleccionar Cliente</h3>\n                            <div  class=\"div_busqueda table-responsive\">\n                                    <table class=\"table table-bordered table-hover tabla_multiple_data_cli\" id=\"tablaresvarios\">\n                                        <thead>\n                                            <tr>\n                                                <th class=\"celda_titulo\" >Mac Address</th>\n                                                <th class=\"celda_titulo\" >Service Package</th>\n                                                <th class=\"celda_titulo\" >CMTS</th>\n                                                <th class=\"celda_titulo\" >Interface</th>\n                                                <th class=\"celda_titulo\" >MaC State</th>\n                                                <th class=\"celda_titulo\" >Fabricante</th>\n                                                <th class=\"celda_titulo\" >Modelo</th>               \n                                                <th class=\"celda_titulo\" >Direccion</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>";
  data.forEach(function (el) {
    tabla_multiple += "<tr>";

    if (el.MACADDRESS != null) {
      tabla_multiple += "<td class=\"celda2\" >".concat(el.MACADDRESS, "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.SERVICEPACKAGE, "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.cmts1, "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el["interface"], "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.MACState == null ? "" : el.MACState, "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.Fabricante == null ? "" : el.Fabricante, "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.Modelo == null ? "" : el.Modelo, "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.direccion == null ? "" : el.direccion, "</td>");
    }

    tabla_multiple += "</tr>";
    if (el.IDCLIENTECRM != null && el.IDCLIENTECRM > 0) idCliente = el.IDCLIENTECRM;
    if (el.Nombre != null && el.Nombre.length > 0) nombreCliente = el.Nombre;
  });
  tabla_multiple += " </tbody>\n                                        \n                                    \n                                    </table>\n                                    <div id=\"info_client_multiple\">\n                                    <span class=\"campo\">C\xF3digo:</span> <span class=\"result\">".concat(idCliente, "</span>\n                                    <span class=\"campo\">Cliente:</span> <span class=\"result\">").concat(nombreCliente, "</span>\n                                    </div>\n                            </div>\n                        </div>");
  $("#multiple_result").html(tabla_multiple);
  $("#searchModal").modal("show");
};

peticiones.armandoMultiplesResultadosIntraway = function armandoMultiplesResultadosIntraway(data) {
  var tabla_multiple = "<div class=\"w-100 result-form-multi\">\n                            <h3 class=\"text-center text-uppercase\">Seleccionar Cliente</h3>\n                            <div  class=\"div_busqueda table-responsive\">\n                                    <table class=\"table table-bordered table-hover tabla_multiple_data_cli\" id=\"tablaresvarios\">\n                                        <thead>\n                                            <tr>\n                                                <th class=\"celda_titulo\" >Mac Address</th>\n                                                <th class=\"celda_titulo\" >Service Package</th>\n                                                <th class=\"celda_titulo\" >CMTS</th>\n                                                <th class=\"celda_titulo\" >Interface</th> \n                                                <th class=\"celda_titulo\" >MaC State</th>\n                                                <th class=\"celda_titulo\" >Estado IN</th>\n                                                <th class=\"celda_titulo\" >Fabricante</th>\n                                                <th class=\"celda_titulo\" >Modelo</th>               \n                                                <th class=\"celda_titulo\" >Direccion</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>";
  data.report[0].Docsis.forEach(function (el) {
    tabla_multiple += "<tr>";

    if (el.Macaddress != null) {
      tabla_multiple += "<td class=\"celda2\" >".concat(el.Macaddress, "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.ServicePackage == null ? "" : el.ServicePackage, "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.multiconsulta ? el.multiconsulta.cmts1 : "", "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.multiconsulta ? el.multiconsulta["interface"] : "", "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.multiconsulta ? el.multiconsulta.MACState == null ? "" : el.multiconsulta.MACState : "", "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.Activo == "SI" ? "ACTIVO" : "INACTIVO", "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.multiconsulta ? el.multiconsulta.Fabricante == null ? "" : el.multiconsulta.Fabricante : "", "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.multiconsulta ? el.multiconsulta.Modelo == null ? "" : el.multiconsulta.Modelo : "", "</td>");
      tabla_multiple += "<td class=\"celda2\" >".concat(el.multiconsulta ? el.multiconsulta.direccion == null ? "" : el.multiconsulta.direccion : "", "</td>");
    }

    tabla_multiple += "</tr>";
  });
  tabla_multiple += " </tbody>\n                                        \n                                    \n                                    </table>\n                                    <div id=\"info_client_multiple\">\n                                    <span class=\"campo\">C\xF3digo:</span> <span class=\"result\">".concat(data.report[0].idClienteCRM, "</span>\n                                    <span class=\"campo\">Cliente:</span> <span class=\"result\">").concat(data.report[0].Nombre, "</span>\n                                    </div>\n                            </div>\n                        </div>");
  $("#multiple_result").html(tabla_multiple);
  $("#searchModal").modal("show");
};

peticiones.cargaArbolDecisiones = function cargaArbolDecisiones(callBack) {
  $.ajax({
    url: "/administrador/multiconsulta/arbol-decision",
    method: "GET",
    async: true,
    cache: false,
    dataType: "json"
  }).done(function (data) {
    //console.log("callbak antes del envio:",data)
    return callBack(data);
  }).fail(function (jqXHR, textStatus, errorThrown) {
    // console.log( "Request failed: " ,textStatus ,jqXHR,errorThrown);
    return callBack({
      "error": "failed",
      "jqXHR": jqXHR,
      "textStatus": textStatus,
      "errorThrown": errorThrown
    });
  });
};

peticiones.cargaArbolDecisionesPorMensaje = function cargaArbolDecisionesPorMensaje(mensajeCliente, imagen, callBack) {
  $.ajax({
    url: "/administrador/multiconsulta/arbol-decision/por-mensaje",
    method: "GET",
    data: {
      mensajeCliente: mensajeCliente,
      imagen: imagen
    },
    async: true,
    //cache: false, 
    dataType: "json"
  }).done(function (data) {
    //console.log("callbak antes del envio:",data)
    return callBack(data);
  }).fail(function (jqXHR, textStatus, errorThrown) {
    // console.log( "Request failed: " ,textStatus ,jqXHR,errorThrown);
    return callBack({
      "error": "failed",
      "jqXHR": jqXHR,
      "textStatus": textStatus,
      "errorThrown": errorThrown
    });
  });
};

peticiones.cargaPeticionArbol = function cargaPeticionArbol(valorSelect, data1, imagen, callBack) {
  $.ajax({
    url: "/administrador/multiconsulta/arbol-decision/paso/".concat(data1, "/detalles"),
    method: "GET",
    data: {
      // codCliente,
      valorSelect: valorSelect,
      // data2,
      imagen: imagen
    },
    async: true,
    cache: false,
    dataType: "json"
  }).done(function (data) {
    //console.log("callbak antes del envio:",data)
    return callBack(data);
  }).fail(function (jqXHR, textStatus, errorThrown) {
    // console.log( "Request failed: " ,textStatus ,jqXHR,errorThrown);
    return callBack({
      "error": "failed",
      "jqXHR": jqXHR,
      "textStatus": textStatus,
      "errorThrown": errorThrown
    });
  });
};

peticiones.registrosPasosArbol = function registrosPasosArbol(pasos, marcaRapida, codCliente, callBack) {
  $.ajax({
    url: "/administrador/multiconsulta/arbol-decision/registros",
    method: "POST",
    data: {
      "decisiones": pasos,
      "mrapida": marcaRapida,
      "codCliente": codCliente
    },
    async: true,
    cache: false,
    dataType: "json"
  }).done(function (data) {
    //console.log("callbak antes del envio:",data)
    return callBack(data);
  }).fail(function (jqXHR, textStatus, errorThrown) {
    // console.log( "Request failed: " ,textStatus ,jqXHR,errorThrown);
    return callBack({
      "error": "failed",
      "jqXHR": jqXHR,
      "textStatus": textStatus,
      "errorThrown": errorThrown
    });
  });
};

/* harmony default export */ __webpack_exports__["default"] = (peticiones);

/***/ }),

/***/ "./resources/js/globalResources/errors.js":
/*!************************************************!*\
  !*** ./resources/js/globalResources/errors.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var errors = {};

errors.codigos = function codigos(codigo) {
  var texto = "";

  if (codigo == 401) {
    location.reload();
    texto = "Sesi\xF3n terminada.";
  }

  switch (codigo) {
    case 204:
      texto = "La petici\xF3n se ha completado con \xE9xito pero su respuesta no tiene ning\xFAn contenido.";
      break;

    case 401:
      texto = "Su sesi\xF3n expiro.";
      break;

    case 403:
      texto = "Petici\xF3n no autoriazada.";
      break;

    case 404:
      texto = "Petici\xF3n no encontrada.";
      break;

    case 405:
      texto = "Error en el servicio. Intente nuevamente.";
      break;

    case 409:
      texto = "Conflicto de petici\xF3n en el servidor. Intente nuevamente. Si persiste el error, actualizar la Web.";
      break;

    case 422:
      texto = "No se puede procesar la petici\xF3n. Verifique los datos enviados.";
      break;

    case 500:
      texto = "Falla inesperada. Intente nuevamente.";
      break;

    default:
      texto = "Falla inesperada con la petici\xF3n. Intente nuevamente.";
      break;
  }

  return texto;
};

errors.mensajeErrorJson = function mensajeErrorJson(erroresJson) {
  //console.log("el tipo de mensaje es:",typeof(erroresJson),erroresJson)
  if (typeof erroresJson == "string") {
    return erroresJson;
  } //recorreo objeto como array


  var msj = "";
  Object.keys(erroresJson).forEach(function (key) {
    //console.log("El key es: -",key,"-")
    if (!isNaN(key)) {
      msj += "<li>".concat(erroresJson[key], "</li>");
    } else {
      msj += "".concat(key, " : ").concat(erroresJson[key], " <br/>");
    }
  });
  return msj;
};

/* harmony default export */ __webpack_exports__["default"] = (errors);

/***/ }),

/***/ 37:
/*!**************************************************************************!*\
  !*** multi ./resources/js/administrador/modulos/multiconsulta/agenda.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! C:\laragon\www\new_system\resources\js\administrador\modulos\multiconsulta\agenda.js */"./resources/js/administrador/modulos/multiconsulta/agenda.js");


/***/ })

/******/ });